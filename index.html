<!DOCTYPE html>
<html>
<head>
  <title>Bluetooth Car Control</title>
  <style>
    body { font-family: Arial; text-align: center; margin-top: 50px; }
    button { font-size: 20px; margin: 10px; padding: 15px 30px; }
  </style>
</head>
<body>
  <h2>üöó Bluetooth Car Control</h2>
  <button onclick="connect()">üîó Connect Bluetooth</button><br><br>
  <button onclick="sendCommand('F')">‚¨Ü Forward</button><br>
  <button onclick="sendCommand('L')">‚¨Ö Left</button>
  <button onclick="sendCommand('S')">‚èπ Stop</button>
  <button onclick="sendCommand('R')">‚û° Right</button><br>
  <button onclick="sendCommand('B')">‚¨á Backward</button>

  <script>
    let bluetoothDevice;
    let writer;

    async function connect() {
      try {
        bluetoothDevice = await navigator.bluetooth.requestDevice({
          acceptAllDevices: true,
          optionalServices: [0x1101] // Serial Port UUID
        });
        const server = await bluetoothDevice.gatt.connect();
        const service = await server.getPrimaryService(0x1101);
        const characteristic = await service.getCharacteristic("00002a00-0000-1000-8000-00805f9b34fb");
        writer = characteristic;
        alert("‚úÖ Connected to " + bluetoothDevice.name);
      } catch (error) {
        alert("‚ùå Connection failed: " + error);
      }
    }

    async function sendCommand(cmd) {
      if (!writer) {
        alert("‚ö† Please connect first!");
        return;
      }
      const encoder = new TextEncoder();
      await writer.writeValue(encoder.encode(cmd));
    }
  </script>
</body>
</html>
